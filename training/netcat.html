<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Netcat Training Console</title>

<style>
:root{
  --bg:#0b0f1a;--panel:#151c38;--fg:#e8ebff;--muted:#9aa3d1;
  --accent:#4f7cff;--border:#27306a;--err:#ff5c5c;--ok:#00ff9c;
  --term:#020617;
}
*{box-sizing:border-box}
body{
  margin:0;font-family:ui-monospace,Menlo,Consolas,monospace;
  background:radial-gradient(1200px 600px at 20% -10%,#141b3a 0%,var(--bg) 60%);
  color:var(--fg)
}
header{
  padding:16px 24px;border-bottom:1px solid var(--border);
  background:#0b1024
}
header h1{margin:0;font-size:22px}
header small{color:var(--muted)}

main{
  max-width:1500px;margin:auto;padding:24px;
  display:grid;grid-template-columns:1fr 1fr;gap:20px
}
.panel{
  background:linear-gradient(180deg,var(--panel),#0f1533);
  border:1px solid var(--border);border-radius:14px;padding:18px
}
h2{margin:0 0 10px;color:#00e5ff;font-size:15px}
label{display:block;margin-top:8px;font-size:12px;color:var(--muted)}
input,textarea{
  width:100%;margin-top:4px;padding:10px;border-radius:8px;
  border:1px solid var(--border);background:#060b20;color:var(--fg)
}
textarea{resize:vertical;min-height:70px}
button{
  margin-top:12px;width:100%;padding:12px;border-radius:10px;
  border:none;background:linear-gradient(135deg,var(--accent),#2e4bff);
  color:white;font-weight:700;cursor:pointer
}
pre{
  background:linear-gradient(180deg,var(--term),#020617);
  border:1px solid #1e293b;border-radius:12px;
  padding:14px;height:260px;overflow:auto;font-size:13px
}
pre::before{
  content:"terminal";display:block;color:#64748b;
  font-size:11px;margin-bottom:6px
}
.bad{color:var(--err)} .ok{color:var(--ok)}
.full{grid-column:1/-1}

@media(max-width:1000px){main{grid-template-columns:1fr}}
</style>
</head>

<body>
<header>
  <h1>Netcat Practice – Dual Terminal</h1>
  <small>Listener ↔ Client | Streaming | Safe training environment</small>
</header>

<main>

<!-- LISTENER -->
<div class="panel">
<h2>Listener Terminal</h2>
<label for="l_port">Listen Port</label>
<input id="l_port" value="4444" placeholder="Enter port number">
<button id="l_open">OPEN LISTENER</button>

<label for="l_send">Send</label>
<textarea id="l_send" placeholder="Enter message to send"></textarea>
<button id="l_send_btn">SEND</button>

<pre id="l_out">—</pre>
</div>

<!-- CLIENT -->
<div class="panel">
<h2>Client Terminal</h2>
<label for="c_host">Target Host</label>
<input id="c_host" value="127.0.0.1" placeholder="Enter target host">

<label for="c_port">Target Port</label>
<input id="c_port" value="4444" placeholder="Enter target port">

<button id="c_open">OPEN CLIENT</button>

<label for="c_send">Send</label>
<textarea id="c_send" placeholder="Enter message to send"></textarea>
<button id="c_send_btn">SEND</button>

<pre id="c_out">—</pre>
</div>

<!-- SAFE REVERSE SHELL -->
<div class="panel">
<h2>Reverse Shell (SAFE MOCK)</h2>
<label for="rs_cmd">Command</label>
<textarea id="rs_cmd" placeholder="whoami"></textarea>
<button id="rs_run">RUN (MOCK)</button>
<pre id="rs_out">—</pre>
</div>

<!-- FILE TRANSFER -->
<div class="panel">
<h2>File Transfer (DEMO)</h2>
<label for="ft_data">Payload</label>
<textarea id="ft_data" placeholder="Enter payload data here"></textarea>
<button id="ft_send">TRANSFER</button>
<pre id="ft_out">—</pre>
</div>

</main>

<script>
(() => {
const $ = id => document.getElementById(id);
let wsL=null, wsC=null;

function wsURL(role, host, port){
  const proto = location.protocol === "https:" ? "wss" : "ws";
  return `${proto}://${location.host}/ws/netcat?role=${role}&host=${host}&port=${port}`;
}

/* Listener */
$('l_open').onclick = ()=>{
  $('l_out').textContent="Connecting…";
  wsL = new WebSocket(wsURL("listener","",$('l_port').value));
  wsL.onmessage = e => $('l_out').textContent += "\n"+e.data;
  wsL.onerror = ()=> $('l_out').textContent="WS error";
};

/* Client */
$('c_open').onclick = ()=>{
  $('c_out').textContent="Connecting…";
  wsC = new WebSocket(wsURL("client",$('c_host').value,$('c_port').value));
  wsC.onmessage = e => $('c_out').textContent += "\n"+e.data;
  wsC.onerror = ()=> $('c_out').textContent="WS error";
};

$('l_send_btn').onclick = ()=> wsL && wsL.send($('l_send').value);
$('c_send_btn').onclick = ()=> wsC && wsC.send($('c_send').value);

/* Reverse shell mock */
$('rs_run').onclick = ()=>{
  const cmd = $('rs_cmd').value.trim();
  const map={
    whoami:"student",
    pwd:"/home/student",
    id:"uid=1000(student)",
    ls:"notes.txt lab.md"
  };
  $('rs_out').textContent = map[cmd] || `command not found: ${cmd}`;
};

/* File transfer demo */
$('ft_send').onclick = ()=>{
  const d=$('ft_data').value;
  $('ft_out').textContent = `Transferred ${d.length} bytes (demo)`;
};
})();
</script>

</body>
</html>
