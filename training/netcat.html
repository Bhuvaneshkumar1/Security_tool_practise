<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Netcat Advanced Practice Console</title>

<style>
:root{
  --bg:#0b0f1a;--card:#151c38;--fg:#e8ebff;--muted:#9aa3d1;
  --accent:#4f7cff;--border:#27306a;--error:#ff5c5c;--ok:#00ff9c;
  --term:#020617;
}
*{box-sizing:border-box}
body{
  margin:0;font-family:ui-monospace,Menlo,Consolas,monospace;
  background:radial-gradient(1200px 600px at 20% -10%,#141b3a 0%,var(--bg) 60%);
  color:var(--fg)
}
header{padding:16px 24px;border-bottom:1px solid var(--border);background:#0b1024}
header h1{margin:0;font-size:22px}
header small{color:var(--muted)}
main{max-width:1400px;margin:auto;padding:24px;display:grid;grid-template-columns:1fr 1fr;gap:20px}
.card{background:linear-gradient(180deg,var(--card),#0f1533);border:1px solid var(--border);border-radius:12px;padding:18px}
h2{margin:0 0 12px;color:#00e5ff;font-size:15px}
label{display:block;margin-top:10px;color:var(--muted);font-size:12px}
input,textarea,select{
  width:100%;margin-top:4px;padding:10px;border-radius:8px;
  border:1px solid var(--border);background:#060b20;color:var(--fg)
}
textarea{min-height:70px;resize:vertical}
button{
  width:100%;margin-top:12px;padding:12px;border-radius:10px;border:none;
  background:linear-gradient(135deg,var(--accent),#2e4bff);color:#fff;font-weight:700;cursor:pointer
}
.row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
pre{
  background:linear-gradient(180deg,var(--term),#020617);
  border:1px solid #1e293b;border-radius:12px;padding:14px;height:220px;
  overflow:auto;font-size:13px;color:#c7d2fe
}
pre::before{content:"terminal";display:block;color:#64748b;font-size:11px;margin-bottom:6px}
.bad{color:var(--error)} .ok{color:var(--ok)}
.full{grid-column:1/-1}
@media(max-width:1000px){main{grid-template-columns:1fr}}
</style>
</head>

<body>
<header>
  <h1>Netcat Advanced Practice Console</h1>
  <small>Bidirectional streaming • Safe reverse-shell mock • File-transfer demo</small>
</header>

<main>

<!-- STREAMING TERMINALS -->
<div class="card">
<h2>Listener (Streaming)</h2>
<label>Port</label><input id="l_port" placeholder="4444">
<button id="l_ws">OPEN LISTENER WS</button>
<textarea id="l_send" placeholder="send line…"></textarea>
<button id="l_send_btn">SEND</button>
<pre id="l_out">—</pre>
</div>

<div class="card">
<h2>Client (Streaming)</h2>
<label>Host</label><input id="c_host" placeholder="127.0.0.1">
<label>Port</label><input id="c_port" placeholder="4444">
<button id="c_ws">OPEN CLIENT WS</button>
<textarea id="c_send" placeholder="send line…"></textarea>
<button id="c_send_btn">SEND</button>
<pre id="c_out">—</pre>
</div>

<!-- SAFE REVERSE SHELL (MOCK) -->
<div class="card">
<h2>Reverse Shell (SAFE MOCK)</h2>
<label for="rs_mode">Mode</label>
<select id="rs_mode" title="Select reverse shell mode">
  <option value="listener">Listener (educational)</option>
  <option value="client">Client (educational)</option>
</select>
<label>Input</label>
<textarea id="rs_in" placeholder="type a command (mocked)"></textarea>
<button id="rs_run">RUN (MOCK)</button>
<pre id="rs_out">—</pre>
</div>

<!-- FILE TRANSFER DEMO -->
<div class="card">
<h2>File Transfer (DEMO)</h2>
<label for="ft_dir">Direction</label>
<select id="ft_dir">
  <option value="send">Send</option>
  <option value="receive">Receive</option>
</select>
<label>Payload (text / base64)</label>
<textarea id="ft_data" placeholder="paste content here"></textarea>
<button id="ft_run">TRANSFER (DEMO)</button>
<pre id="ft_out">—</pre>
</div>

</main>

<script>
(() => {
const $ = id => document.getElementById(id);
let wsL=null, wsC=null;

function wsURL(role, host, port){
  const proto = location.protocol === "https:" ? "wss" : "ws";
  return `${proto}://${location.host}/ws/netcat?role=${role}&host=${host||""}&port=${port||""}`;
}

/* -------- Bidirectional Streaming (WebSockets) -------- */
$('l_ws').onclick = () => {
  $('l_out').textContent="Connecting…";
  try{
    wsL = new WebSocket(wsURL("listener","", $('l_port').value));
    wsL.onmessage = e => $('l_out').textContent += `\n${e.data}`;
    wsL.onopen = () => $('l_out').textContent="Listener WS open";
    wsL.onerror = () => $('l_out').textContent="WS error (backend not present)";
  }catch{ $('l_out').textContent="WS unsupported"; }
};
$('c_ws').onclick = () => {
  $('c_out').textContent="Connecting…";
  try{
    wsC = new WebSocket(wsURL("client", $('c_host').value, $('c_port').value));
    wsC.onmessage = e => $('c_out').textContent += `\n${e.data}`;
    wsC.onopen = () => $('c_out').textContent="Client WS open";
    wsC.onerror = () => $('c_out').textContent="WS error (backend not present)";
  }catch{ $('c_out').textContent="WS unsupported"; }
};
$('l_send_btn').onclick = ()=> wsL && wsL.send($('l_send').value);
$('c_send_btn').onclick = ()=> wsC && wsC.send($('c_send').value);

/* -------- Reverse Shell (SAFE MOCK) -------- */
$('rs_run').onclick = ()=>{
  const cmd = $('rs_in').value.trim();
  if(!cmd){$('rs_out').textContent="No input";return;}
  const map = {
    "whoami":"student",
    "pwd":"/home/student",
    "id":"uid=1000(student) gid=1000(student)",
    "ls":"notes.txt  lab.md  output.log"
  };
  $('rs_out').textContent = map[cmd] || `command not found: ${cmd}`;
};

/* -------- File Transfer (DEMO) -------- */
$('ft_run').onclick = ()=>{
  const d=$('ft_data').value;
  if(!d){$('ft_out').textContent="No payload";return;}
  if($('ft_dir').value==="send"){
    $('ft_out').textContent=`Sent ${d.length} bytes (demo)`;
  }else{
    $('ft_out').textContent=`Received ${d.length} bytes (demo)`;
  }
};
})();
</script>

</body>
</html>
