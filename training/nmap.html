<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Reconnaissance & Discovery</title>

<style>
:root{
  --bg:#0b0f1a;
  --panel:#111827;
  --border:#1f2937;
  --fg:#e5e7eb;
  --muted:#9ca3af;
  --accent:#3b82f6;
  --good:#22c55e;
  --warn:#f59e0b;
  --bad:#ef4444;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,sans-serif;
  background:var(--bg);
  color:var(--fg);
}
header{
  padding:24px;
  text-align:center;
  border-bottom:1px solid var(--border);
  background:#020617;
}
header h1{margin:0;font-size:26px;letter-spacing:.08em}
header p{margin-top:8px;font-size:14px;color:var(--muted)}

main{max-width:1100px;margin:auto;padding:28px}

.section{
  background:linear-gradient(180deg,#0f172a,#020617);
  border:1px solid var(--border);
  border-radius:18px;
  padding:24px;
  margin-bottom:26px;
}
.section h2{margin:0 0 12px;color:var(--accent)}
.section p,.section li{font-size:14px;color:var(--muted);line-height:1.7}
ul{margin-left:18px}

.code,pre{
  background:#020617;
  border:1px solid #1e293b;
  border-radius:12px;
  padding:14px;
  font-family:ui-monospace,monospace;
  font-size:13px;
  white-space:pre-wrap;
}

input,select,button{
  width:100%;
  padding:10px;
  margin-top:8px;
  border-radius:10px;
  border:1px solid var(--border);
  background:#020617;
  color:var(--fg);
}

button{
  background:linear-gradient(135deg,#3b82f6,#2563eb);
  font-weight:700;
  cursor:pointer;
}

.error{color:var(--bad)}
.note{
  margin-top:12px;
  padding:12px;
  background:#020617;
  border-left:4px solid var(--warn);
  border-radius:10px;
  color:#fde68a;
  font-size:13px;
}
</style>
</head>

<body data-lesson="reconnaissance">

<header>
  <h1>RECONNAISSANCE & DISCOVERY</h1>
  <p>Mapping attack surface before exploitation</p>
</header>

<main>

<section class="section">
<h2>1. What Is Reconnaissance?</h2>
<p>
Reconnaissance is the process of identifying hosts, services, and technologies
before attempting exploitation. Most attacks fail because this phase is rushed.
</p>
</section>

<section class="section">
<h2>2. Passive vs Active Reconnaissance</h2>
<ul>
  <li><b>Passive:</b> DNS, certificates, public metadata (low noise)</li>
  <li><b>Active:</b> Port scanning, service detection (detectable)</li>
</ul>
</section>

<section class="section">
<h2>3. Active Reconnaissance — Nmap (Live)</h2>

<label>Target (IP / Hostname)</label>
<input id="target" placeholder="scanme.nmap.org">

<label for="scan">Scan Type</label>
<select id="scan">
  <option value="-sS">TCP SYN Scan</option>
  <option value="-sV">Service Detection</option>
  <option value="-O">OS Detection</option>
</select>

<button onclick="runNmap()">Run Recon Scan</button>

<div class="note">
Only controlled scans are allowed. Output is for learning interpretation.
</div>
</section>

<section class="section">
<h2>Command Executed</h2>
<pre id="cmd">—</pre>
</section>

<section class="section">
<h2>Scan Output</h2>
<pre id="output">—</pre>
</section>

<section class="section">
<h2>4. Interpreting Recon Output</h2>
<ul>
  <li>Open ports ≠ vulnerabilities</li>
  <li>Version info guides next phase</li>
  <li>OS detection is probabilistic</li>
</ul>
</section>

<section class="section">
<h2>5. Defender’s Perspective</h2>
<ul>
  <li>Port scan patterns are logged</li>
  <li>Aggressive scans raise alerts</li>
  <li>Rate matters more than tools</li>
</ul>
</section>

</main>

<script>
async function runNmap(){
  const target = document.getElementById("target").value.trim();
  const scan = document.getElementById("scan").value;
  const out = document.getElementById("output");
  const cmdBox = document.getElementById("cmd");

  if(!target){
    out.textContent = "Error: Target required";
    out.className = "error";
    return;
  }

  const args = `${scan} ${target}`;
  cmdBox.textContent = `nmap ${args}`;
  out.textContent = "Running scan…";

  try{
    const res = await fetch("/run/nmap",{
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ args })
    });

    const data = await res.json();
    out.textContent = data.stdout || data.stderr || "No output";

  }catch(e){
    out.textContent = "Backend unreachable";
  }
}
</script>

<script src="/static/lesson_tracker.js"></script>
</body>
</html>
